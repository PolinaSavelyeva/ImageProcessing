<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">

<head>
    <meta charset="utf-8">
    <title>How To make a code</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="PolinaSavelyeva">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <link rel="shortcut icon" type="image/x-icon" href="https://PolinaSavelyeva.github.io/ImageProcessing/img/favicon.ico">
    <link id="fsdocs-theme" type="text/css" rel="stylesheet" href="https://PolinaSavelyeva.github.io/ImageProcessing/content/fsdocs-dark.css" />
    <link type="text/css" rel="stylesheet" href="https://PolinaSavelyeva.github.io/ImageProcessing/content/fsdocs-main.css" />
    <link type="text/css" rel="stylesheet" href="https://PolinaSavelyeva.github.io/ImageProcessing/content/fsdocs-custom.css" />

    <script type="text/javascript" src="https://PolinaSavelyeva.github.io/ImageProcessing/content/theme-toggle.js">
        <!-- Placed in head to prevent flicker -->
    </script>

    <link type="text/css" rel="stylesheet" href="https://PolinaSavelyeva.github.io/ImageProcessing/content/navbar-fixed-left.css" />
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
<nav class="navbar sticky-top navbar-expand-lg bg-body">
    <div class="container">
        <a class="navbar-brand" href="https://PolinaSavelyeva.github.io/ImageProcessing/"><img id="fsdocs-logo" src="https://raw.githubusercontent.com/PolinaSavelyeva/ImageProcessing/main/resources/logo_down_scaled.png" /></a>
        <div id="header">
            <div class="searchbox">
                <input data-search-input="" class="m-3" id="search-by" type="search" placeholder="Search..." />
            </div>
        </div>
        <div class="nav-item dropdown">
            <button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center"
                    id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown"
                    data-bs-display="static">

                <i id="theme-icon-active" class="fa-solid fa-circle-half-stroke"></i>
                <span class="d-none d-sm-none d-md-block ms-2">Toggle theme</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme"
                style="--bs-dropdown-min-width: 8rem;">
                <li>
                    <button type="button" class="dropdown-item d-flex align-items-center"
                            data-bs-theme-value="light">
                        <i class="me-2  fa-solid fa-sun"></i>
                        Light
                        <i class="bi ms-auto d-none fa-solid fa-check"></i>
                    </button>
                </li>
                <li>
                    <button type="button" class="dropdown-item d-flex align-items-center active"
                            data-bs-theme-value="dark">
                        <i class="me-2  fa-regular fa-moon"></i>
                        Dark
                        <i class="bi ms-auto d-none fa-solid fa-check"></i>
                    </button>
                </li>
                <li>
                    <button type="button" class="dropdown-item d-flex align-items-center"
                            data-bs-theme-value="auto">
                        <i class="me-2 fa-solid fa-circle-half-stroke"></i>
                        Auto
                        <i class="bi ms-auto d-none fa-solid fa-check"></i>
                    </button>
                </li>
            </ul>
        </div>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <ul class="navbar-nav flex-wrap">
                <li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="other-links" role="button" data-bs-toggle="dropdown"
    aria-expanded="false">
    Tutorials
  </a>
  <ul class="dropdown-menu" aria-labelledby="other-links">
    <li><a class="dropdown-item" href="https://PolinaSavelyeva.github.io/ImageProcessing/Tutorials/Getting_Started.html">Getting Started</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="other-links" role="button" data-bs-toggle="dropdown"
    aria-expanded="false">
    How To Guides
  </a>
  <ul class="dropdown-menu" aria-labelledby="other-links">
    <li><a class="dropdown-item" href="https://PolinaSavelyeva.github.io/ImageProcessing/How_Tos/Making_A_Code.html">How To make a code</a></li>
<li><a class="dropdown-item" href="https://PolinaSavelyeva.github.io/ImageProcessing/How_Tos/Using_A_CLI.html">How To use CLI</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="other-links" role="button" data-bs-toggle="dropdown"
    aria-expanded="false">
    Explanations
  </a>
  <ul class="dropdown-menu" aria-labelledby="other-links">
    <li><a class="dropdown-item" href="https://PolinaSavelyeva.github.io/ImageProcessing/Explanations/Structure.html">Structure</a></li>
  </ul>
</li>
                <li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="other-links" role="button" data-bs-toggle="dropdown"
    aria-expanded="false">
    API Reference
  </a>
  <ul class="dropdown-menu" aria-labelledby="other-links">
    <li><a class="dropdown-item" href="https://PolinaSavelyeva.github.io/ImageProcessing/reference/index.html">All Namespaces</a></li>
  </ul>
</li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="project-references" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        Project References
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="other-links">
                        <li><a class="dropdown-item" href="https://github.com/PolinaSavelyeva/ImageProcessing/blob/main/README.md"><i
                            class="fa-brands fa-readme  pe-2"></i>README</a></li>
                        <li><a class="dropdown-item" href="https://github.com/PolinaSavelyeva/ImageProcessing/blob/master/LICENSE.md"><i
                            class="fa-regular  fa-id-card pe-2"></i>LICENSE</a></li>
                        <li><a class="dropdown-item" href="https://github.com/PolinaSavelyeva/ImageProcessing/blob/main/CHANGELOG.md"><i
                            class="fa-regular  fa-sticky-note pe-2"></i>CHANGELOG/Release
                            Notes</a></li>
                        <li><a class="dropdown-item" href="https://github.com/PolinaSavelyeva/ImageProcessing/"><i
                            class="fa-brands fa-github pe-2"></i>Source Repository</a></li>

                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container" id="fsdocs-content">
    
<h1><a name="How-To-make-your-own-ImageProcessing-code" class="anchor" href="#How-To-make-your-own-ImageProcessing-code">How-To make your own ImageProcessing code</a></h1>
<h2><a name="Implemented-Features" class="anchor" href="#Implemented-Features">Implemented Features</a></h2>
<hr />
<p>ImageProcessing supports the following features, which you can use when implementing your examples:</p>
<ul>
<li>
<strong>Filters for CPU/GPU</strong>
<ul>
<li>Gaussian Blur</li>
<li>Edges</li>
<li>Sharpen</li>
<li>Lighten</li>
<li>Darken</li>
</ul>
</li>
</ul>
<ul>
<li>
<strong>Transformations for CPU/GPU</strong>
<ul>
<li>Clockwise rotation</li>
<li>Counterclockwise rotation</li>
<li>Vertical flip (Y-axis)</li>
<li>Horizontal flip (X-axis)</li>
</ul>
</li>
</ul>
<ul>
<li>
<strong>Multithreaded processing tools</strong>
<ul>
<li>Saving agent</li>
<li>Processing agent</li>
<li>Full processing agent, i.e saving plus processing</li>
<li>Events logger</li>
</ul>
</li>
</ul>
<ul>
<li>
<p><strong>Directory with pictures processing tool</strong></p>
<p>Also you can specify:</p>
<ul>
<li>Processing unit (CPU or GPU)</li>
<li>Agents support</li>
</ul>
</li>
</ul>
<p>For detailed descriptions of all features visit <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/index.html">Api Reference</a>.</p>
<h2><a name="Processing-on-CPU" class="anchor" href="#Processing-on-CPU">Processing on CPU</a></h2>
<hr />
<h3><a name="CPU-filter-kernels" class="anchor" href="#CPU-filter-kernels">CPU filter kernels</a></h3>
<p>Filter kernels are used to call <code>applyFilter</code> function.
You can create 2D float32 array as new kernel or use implemented <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-kernels.html">kernels</a> such as:</p>
<ul>
<li>Gaussian Blur</li>
<li>Edges</li>
<li>Sharpen</li>
<li>Lighten</li>
<li>Darken</li>
</ul>
<h3><a name="Multi-threaded-processing-on-CPU" class="anchor" href="#Multi-threaded-processing-on-CPU">Multi-threaded processing on CPU</a></h3>
<p>You can use either single-threaded CPU-based image processing or multi-threaded image processing.
Multithreading is performed using logger and agent functions, which is specified in this <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-agents.html">section</a>.</p>
<p>Four of them are implemented:</p>
<ul>
<li>Logger, which is used to inform user about status of operations, i.e work of another agents</li>
<li>Saver agent, which is used to save images stored in queue and to send messages to logger</li>
<li>Processing agent, which is used to process images stored in queue using specified transformation and to send messages to logger</li>
<li>Full processing agent, which does both saving and processing</li>
</ul>
<h3><a name="Simple-CPU-Example" class="anchor" href="#Simple-CPU-Example">Simple CPU Example</a></h3>
<p>Open library and load image to process:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">MyImage</span>
<span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">CPU</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">myImage</span> <span class="o">=</span> <span class="id">load</span> <span class="pn">(</span><span class="s">&quot;Full/Path/To/Images/Folder/image_name.jpg&quot;</span><span class="pn">)</span>
</code></pre>
<p>Create new function which sequentially applies blur filter and clockwise rotation to images and saves the result:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="fn">applyCustomFilterOnCPU</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="fn">image</span><span class="pn">:</span> <span class="id">MyImage</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="fn">pathToSave</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="rt">string</span><span class="pn">)</span> <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="fn">blurredImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 7)" onmouseover="showTip(event, 'fs3', 7)" class="fn">image</span> <span class="o">|&gt;</span> <span class="id">applyFilter</span> <span class="id">gaussianBlurKernel</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="fn">rotatedImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="fn">blurredImage</span> <span class="o">|&gt;</span> <span class="id">rotate</span> <span class="k">true</span>
    
    <span class="id">save</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="id">rotatedImage</span> <span onmouseout="hideTip(event, 'fs4', 11)" onmouseover="showTip(event, 'fs4', 11)" class="id">pathToSave</span>
</code></pre>
<p>The result:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">MyImage</span>
<span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">CPU</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 12)" onmouseover="showTip(event, 'fs1', 12)" class="id">myImage</span> <span class="o">=</span> <span class="id">load</span> <span class="pn">(</span><span class="s">&quot;Full/Path/To/Images/Folder/image_name.jpg&quot;</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 13)" onmouseover="showTip(event, 'fs2', 13)" class="fn">applyCustomFilterOnCPU</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs3', 14)" onmouseover="showTip(event, 'fs3', 14)" class="fn">image</span><span class="pn">:</span> <span class="id">MyImage</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs4', 15)" onmouseover="showTip(event, 'fs4', 15)" class="fn">pathToSave</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs5', 16)" onmouseover="showTip(event, 'fs5', 16)" class="rt">string</span><span class="pn">)</span> <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 17)" onmouseover="showTip(event, 'fs6', 17)" class="fn">blurredImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 18)" onmouseover="showTip(event, 'fs3', 18)" class="fn">image</span> <span class="o">|&gt;</span> <span class="id">applyFilter</span> <span class="id">gaussianBlurKernel</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 19)" onmouseover="showTip(event, 'fs7', 19)" class="fn">rotatedImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 20)" onmouseover="showTip(event, 'fs6', 20)" class="fn">blurredImage</span> <span class="o">|&gt;</span> <span class="id">rotate</span> <span class="k">true</span>
    
    <span class="id">save</span> <span onmouseout="hideTip(event, 'fs7', 21)" onmouseover="showTip(event, 'fs7', 21)" class="id">rotatedImage</span> <span onmouseout="hideTip(event, 'fs4', 22)" onmouseover="showTip(event, 'fs4', 22)" class="id">pathToSave</span>
 
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 23)" onmouseover="showTip(event, 'fs4', 23)" class="id">pathToSave</span> <span class="o">=</span> <span class="s">&quot;Path/To/Directory/image_name.jpg&quot;</span>

<span onmouseout="hideTip(event, 'fs2', 24)" onmouseover="showTip(event, 'fs2', 24)" class="fn">applyCustomFilterOnCPU</span> <span onmouseout="hideTip(event, 'fs1', 25)" onmouseover="showTip(event, 'fs1', 25)" class="id">myImage</span> <span onmouseout="hideTip(event, 'fs4', 26)" onmouseover="showTip(event, 'fs4', 26)" class="id">pathToSave</span>
</code></pre>
<h2><a name="Processing-on-GPU" class="anchor" href="#Processing-on-GPU">Processing on GPU</a></h2>
<hr />
<h3><a name="GPU-filter-kernels" class="anchor" href="#GPU-filter-kernels">GPU filter kernels</a></h3>
<p>Filter kernels are used to call <code>applyFilter</code> function.
You can create 2D float32 array as new kernel or use implemented <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-kernels.html">kernels</a> such as:</p>
<ul>
<li>Gaussian Blur</li>
<li>Edges</li>
<li>Sharpen</li>
<li>Lighten</li>
<li>Darken</li>
</ul>
<h3><a name="GPU-processing-kernels" class="anchor" href="#GPU-processing-kernels">GPU processing kernels</a></h3>
<p>GPU kernels are used to call GPU-processing functions.
They have specific defining style, so for more information about how they work I recommended to visit <a href="https://yaccconstructor.github.io/Brahma.FSharp/Articles/Custom_Kernels.html">Brahma.Fsharp tutorial</a>.
But if you have no need in creating new GPU kernels just use implemented <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-gpu.html">ones</a>, such as:</p>
<ul>
<li><code>applyFilterGPUKernel</code></li>
<li><code>rotateGPUKernel</code></li>
<li><code>flipGPUKernel</code></li>
</ul>
<p>All of them take <code>clContext</code> (which is device's environment abstraction) and <code>localWorkSize</code> (which shows the size of local work group) as input parameters.</p>
<h3><a name="Multi-threaded-processing-on-GPU" class="anchor" href="#Multi-threaded-processing-on-GPU">Multi-threaded processing on GPU</a></h3>
<p>You can use either single-threaded GPU-based image processing or multi-threaded image processing.
Multithreading is performed using logger and agent functions, which specified in this <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-agents.html">section</a>.</p>
<p>Four of them are implemented:</p>
<ul>
<li>Logger, which is used to inform user about status of operations, i.e work of another agents</li>
<li>Saver agent, which is used to save images stored in queue and to send messages to logger</li>
<li>Processing agent, which is used to process images stored in queue using specified transformation and to send messages to logger</li>
<li>Full processing agent, which does both saving and processing</li>
</ul>
<h3><a name="Simple-GPU-Example" class="anchor" href="#Simple-GPU-Example">Simple GPU Example</a></h3>
<p>Open library and load image to process:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">MyImage</span>
<span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">GPU</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 27)" onmouseover="showTip(event, 'fs1', 27)" class="id">myImage</span> <span class="o">=</span> <span class="id">load</span> <span class="pn">(</span><span class="s">&quot;Full/Path/To/Images/Folder/image_name.jpg&quot;</span><span class="pn">)</span>
</code></pre>
<p>Before creating our function we need to do some steps for diagnosing graphical device.</p>
<p>Define the <code>device</code> value by specifying the brand of your GPU or whatever the program finds (embedded graphics cards are also suitable).
And make OpenCL context of it:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 28)" onmouseover="showTip(event, 'fs8', 28)" class="id">device</span> <span class="o">=</span> <span class="id">Brahma</span><span class="pn">.</span><span class="id">FSharp</span><span class="pn">.</span><span class="id">ClDevice</span><span class="pn">.</span><span class="id">GetFirstAppropriateDevice</span><span class="pn">(</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs9', 29)" onmouseover="showTip(event, 'fs9', 29)" class="id">clContext</span> <span class="o">=</span> <span class="id">Brahma</span><span class="pn">.</span><span class="id">FSharp</span><span class="pn">.</span><span class="id">ClContext</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 30)" onmouseover="showTip(event, 'fs8', 30)" class="id">device</span><span class="pn">)</span>
</code></pre>
<p>Next, define new values for filter and rotation functions.
This action is necessary because of compiling <a href="https://polinasavelyeva.github.io/ImageProcessing/How_Tos/Making_A_Code.html#GPU-processing-kernels">kernel function</a> once:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 31)" onmouseover="showTip(event, 'fs10', 31)" class="fn">applyFilterGPU</span> <span class="o">=</span> <span class="id">applyFilter</span> <span onmouseout="hideTip(event, 'fs9', 32)" onmouseover="showTip(event, 'fs9', 32)" class="id">clContext</span> <span class="n">64</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 33)" onmouseover="showTip(event, 'fs11', 33)" class="fn">rotateGPU</span> <span class="o">=</span> <span class="id">rotate</span> <span onmouseout="hideTip(event, 'fs9', 34)" onmouseover="showTip(event, 'fs9', 34)" class="id">clContext</span> <span class="n">64</span>
</code></pre>
<p>Create new function which sequentially applies blur filter and clockwise rotation to images and saves the result:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 35)" onmouseover="showTip(event, 'fs12', 35)" class="fn">applyCustomFilterOnGPU</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs13', 36)" onmouseover="showTip(event, 'fs13', 36)" class="fn">image</span><span class="pn">:</span> <span class="id">MyImage</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs4', 37)" onmouseover="showTip(event, 'fs4', 37)" class="fn">pathToSave</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs5', 38)" onmouseover="showTip(event, 'fs5', 38)" class="rt">string</span><span class="pn">)</span> <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 39)" onmouseover="showTip(event, 'fs6', 39)" class="fn">blurredImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 40)" onmouseover="showTip(event, 'fs13', 40)" class="fn">image</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 41)" onmouseover="showTip(event, 'fs10', 41)" class="fn">applyFilterGPU</span> <span class="id">gaussianBlurKernel</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 42)" onmouseover="showTip(event, 'fs7', 42)" class="fn">rotatedImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 43)" onmouseover="showTip(event, 'fs6', 43)" class="fn">blurredImage</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs11', 44)" onmouseover="showTip(event, 'fs11', 44)" class="fn">rotateGPU</span> <span class="k">true</span>
    
    <span class="id">save</span> <span onmouseout="hideTip(event, 'fs7', 45)" onmouseover="showTip(event, 'fs7', 45)" class="id">rotatedImage</span> <span onmouseout="hideTip(event, 'fs4', 46)" onmouseover="showTip(event, 'fs4', 46)" class="id">pathToSave</span>
</code></pre>
<p>The result:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">MyImage</span>
<span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">GPU</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 47)" onmouseover="showTip(event, 'fs1', 47)" class="id">myImage</span> <span class="o">=</span> <span class="id">load</span> <span class="pn">(</span><span class="s">&quot;Full/Path/To/Images/Folder/image_name.jpg&quot;</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 48)" onmouseover="showTip(event, 'fs8', 48)" class="id">device</span> <span class="o">=</span> <span class="id">Brahma</span><span class="pn">.</span><span class="id">FSharp</span><span class="pn">.</span><span class="id">ClDevice</span><span class="pn">.</span><span class="id">GetFirstAppropriateDevice</span><span class="pn">(</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs9', 49)" onmouseover="showTip(event, 'fs9', 49)" class="id">clContext</span> <span class="o">=</span> <span class="id">Brahma</span><span class="pn">.</span><span class="id">FSharp</span><span class="pn">.</span><span class="id">ClContext</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 50)" onmouseover="showTip(event, 'fs8', 50)" class="id">device</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 51)" onmouseover="showTip(event, 'fs10', 51)" class="fn">applyFilterGPU</span> <span class="o">=</span> <span class="id">applyFilter</span> <span onmouseout="hideTip(event, 'fs9', 52)" onmouseover="showTip(event, 'fs9', 52)" class="id">clContext</span> <span class="n">64</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 53)" onmouseover="showTip(event, 'fs11', 53)" class="fn">rotateGPU</span> <span class="o">=</span> <span class="id">rotate</span> <span onmouseout="hideTip(event, 'fs9', 54)" onmouseover="showTip(event, 'fs9', 54)" class="id">clContext</span> <span class="n">64</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 55)" onmouseover="showTip(event, 'fs12', 55)" class="fn">applyCustomFilterOnGPU</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs13', 56)" onmouseover="showTip(event, 'fs13', 56)" class="fn">image</span><span class="pn">:</span> <span class="id">MyImage</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs4', 57)" onmouseover="showTip(event, 'fs4', 57)" class="fn">pathToSave</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs5', 58)" onmouseover="showTip(event, 'fs5', 58)" class="rt">string</span><span class="pn">)</span> <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 59)" onmouseover="showTip(event, 'fs6', 59)" class="fn">blurredImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 60)" onmouseover="showTip(event, 'fs13', 60)" class="fn">image</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 61)" onmouseover="showTip(event, 'fs10', 61)" class="fn">applyFilterGPU</span> <span class="id">gaussianBlurKernel</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 62)" onmouseover="showTip(event, 'fs7', 62)" class="fn">rotatedImage</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 63)" onmouseover="showTip(event, 'fs6', 63)" class="fn">blurredImage</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs11', 64)" onmouseover="showTip(event, 'fs11', 64)" class="fn">rotateGPU</span> <span class="k">true</span>
    
    <span class="id">save</span> <span onmouseout="hideTip(event, 'fs7', 65)" onmouseover="showTip(event, 'fs7', 65)" class="id">rotatedImage</span> <span onmouseout="hideTip(event, 'fs4', 66)" onmouseover="showTip(event, 'fs4', 66)" class="id">pathToSave</span>
 
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 67)" onmouseover="showTip(event, 'fs4', 67)" class="id">pathToSave</span> <span class="o">=</span> <span class="s">&quot;Path/To/Directory/image_name.jpg&quot;</span>

<span onmouseout="hideTip(event, 'fs12', 68)" onmouseover="showTip(event, 'fs12', 68)" class="fn">applyCustomFilterOnGPU</span> <span onmouseout="hideTip(event, 'fs1', 69)" onmouseover="showTip(event, 'fs1', 69)" class="id">myImage</span> <span onmouseout="hideTip(event, 'fs4', 70)" onmouseover="showTip(event, 'fs4', 70)" class="id">pathToSave</span>
</code></pre>
<h2><a name="Processing-of-Multiple-Images-via-Directories" class="anchor" href="#Processing-of-Multiple-Images-via-Directories">Processing of Multiple Images via Directories</a></h2>
<hr />
<h3><a name="Process-parameters" class="anchor" href="#Process-parameters">Process parameters</a></h3>
<p>The <code>processImage</code> function is designed to process directories with various configuration options.
It allows you to choose the type of <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-process-agentssupport.html">agent support</a> for processing:</p>
<ul>
<li><code>Full</code>, which uses a single agent for opening, processing and saving</li>
<li><code>Partial</code>, which uses different agents for each transformation and saving</li>
<li><code>PartialUsingComposition</code>, which uses one agent for transformation and one for saving</li>
<li><code>No</code>, which uses naive image processing function</li>
</ul>
<p>And define a list of <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-process-transformations.html">transformations</a> to apply to the image, and specify the <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/process-processingunits.html">processing unit</a> (CPU or GPU) for the operation.</p>
<h3><a name="Simple-Directory-Processing-Example" class="anchor" href="#Simple-Directory-Processing-Example">Simple Directory Processing Example</a></h3>
<p>Open library and define directories:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">Process</span>
<span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">AgentSupport</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 71)" onmouseover="showTip(event, 'fs14', 71)" class="id">inputDirectory</span> <span class="o">=</span> <span class="s">&quot;Full/Path/To/Input/Images/Folder/&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 72)" onmouseover="showTip(event, 'fs15', 72)" class="id">outputDirectory</span> <span class="o">=</span> <span class="s">&quot;Full/Path/To/Output/Images/Folder/&quot;</span>
</code></pre>
<p>Define list of <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-process-transformations.html">transformations</a> and filters that will be used:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 73)" onmouseover="showTip(event, 'fs16', 73)" class="id">imageEditorsList</span> <span class="o">=</span> <span class="pn">[</span><span class="id">Darken</span><span class="pn">;</span> <span class="id">Edges</span><span class="pn">;</span> <span class="id">RotationL</span><span class="pn">]</span>
</code></pre>
<p>Note that transformations and filters will be applied sequentially, one-by-one on each image in the specific directory. Choose and define <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-process-processingunits.html#CPU">processing unit</a> and <a href="https://polinasavelyeva.github.io/ImageProcessing/reference/imageprocessing-process-agentssupport.html">multithreading mode</a>.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 74)" onmouseover="showTip(event, 'fs17', 74)" class="id">processingUnit</span> <span class="o">=</span> <span class="id">GPU</span> <span class="id">Brahma</span><span class="pn">.</span><span class="id">FSharp</span><span class="pn">.</span><span class="id">Platform</span><span class="pn">.</span><span class="id">Nvidia</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 75)" onmouseover="showTip(event, 'fs18', 75)" class="id">agentsSupport</span> <span class="o">=</span> <span class="id">AgentSupport</span><span class="pn">.</span><span class="id">Full</span>
</code></pre>
<p>The result:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">Process</span>
<span class="k">open</span> <span class="id">ImageProcessing</span><span class="pn">.</span><span class="id">AgentSupport</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 76)" onmouseover="showTip(event, 'fs14', 76)" class="id">inputDirectory</span> <span class="o">=</span> <span class="s">&quot;Full/Path/To/Input/Images/Folder/&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 77)" onmouseover="showTip(event, 'fs15', 77)" class="id">outputDirectory</span> <span class="o">=</span> <span class="s">&quot;Full/Path/To/Output/Images/Folder/&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 78)" onmouseover="showTip(event, 'fs16', 78)" class="id">imageEditorsList</span> <span class="o">=</span> <span class="pn">[</span><span class="id">Darken</span><span class="pn">;</span> <span class="id">Edges</span><span class="pn">;</span> <span class="id">RotationL</span><span class="pn">]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 79)" onmouseover="showTip(event, 'fs17', 79)" class="id">processingUnit</span> <span class="o">=</span> <span class="id">GPU</span> <span class="id">Brahma</span><span class="pn">.</span><span class="id">FSharp</span><span class="pn">.</span><span class="id">Platform</span><span class="pn">.</span><span class="id">Nvidia</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 80)" onmouseover="showTip(event, 'fs18', 80)" class="id">agentsSupport</span> <span class="o">=</span> <span class="id">AgentSupport</span><span class="pn">.</span><span class="id">Full</span>

<span class="id">processImages</span> <span onmouseout="hideTip(event, 'fs14', 81)" onmouseover="showTip(event, 'fs14', 81)" class="id">inputDirectory</span> <span onmouseout="hideTip(event, 'fs15', 82)" onmouseover="showTip(event, 'fs15', 82)" class="id">outputDirectory</span> <span onmouseout="hideTip(event, 'fs17', 83)" onmouseover="showTip(event, 'fs17', 83)" class="id">processingUnit</span> <span onmouseout="hideTip(event, 'fs16', 84)" onmouseover="showTip(event, 'fs16', 84)" class="id">imageEditorsList</span> <span onmouseout="hideTip(event, 'fs18', 85)" onmouseover="showTip(event, 'fs18', 85)" class="id">agentsSupport</span>
</code></pre>

    <div class="fsdocs-tip" id="fs1">val myImage: obj</div>
<div class="fsdocs-tip" id="fs2">val applyCustomFilterOnCPU: image: &#39;a -&gt; pathToSave: string -&gt; &#39;b</div>
<div class="fsdocs-tip" id="fs3">val image: &#39;a</div>
<div class="fsdocs-tip" id="fs4">val pathToSave: string</div>
<div class="fsdocs-tip" id="fs5">Multiple items<br />val string: value: &#39;T -&gt; string<br /><br />--------------------<br />type string = System.String</div>
<div class="fsdocs-tip" id="fs6">val blurredImage: obj</div>
<div class="fsdocs-tip" id="fs7">val rotatedImage: obj</div>
<div class="fsdocs-tip" id="fs8">val device: obj</div>
<div class="fsdocs-tip" id="fs9">val clContext: obj</div>
<div class="fsdocs-tip" id="fs10">val applyFilterGPU: (obj -&gt; obj -&gt; obj)</div>
<div class="fsdocs-tip" id="fs11">val rotateGPU: (bool -&gt; obj -&gt; obj)</div>
<div class="fsdocs-tip" id="fs12">val applyCustomFilterOnGPU: image: obj -&gt; pathToSave: string -&gt; &#39;a</div>
<div class="fsdocs-tip" id="fs13">val image: obj</div>
<div class="fsdocs-tip" id="fs14">val inputDirectory: string</div>
<div class="fsdocs-tip" id="fs15">val outputDirectory: string</div>
<div class="fsdocs-tip" id="fs16">val imageEditorsList: obj list</div>
<div class="fsdocs-tip" id="fs17">val processingUnit: obj</div>
<div class="fsdocs-tip" id="fs18">val agentsSupport: obj</div>

</div>

<!-- BEGIN SEARCH BOX: this adds support for the search box -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />
<script type="text/javascript">var fsdocs_search_baseurl = 'https://PolinaSavelyeva.github.io/ImageProcessing/';</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script type="text/javascript" src="https://PolinaSavelyeva.github.io/ImageProcessing/content/fsdocs-search.js"></script>
<script type="text/javascript" src="https://PolinaSavelyeva.github.io/ImageProcessing/content/fsdocs-tips.js"></script>

<!-- END SEARCH BOX: this adds support for the search box -->
</div>
</body>

</html>